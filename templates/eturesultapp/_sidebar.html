{% if show_sidebar %}
<div class="col-md-3 col-lg-2 sidebar collapse d-md-block" id="sidebarMenu">
    <div class="position-sticky pt-3">
        <!-- User Profile Section -->
        <div class="p-3 mb-3 bg-white rounded shadow-sm">
            <div class="text-center mb-3">
                <div class="border-bottom pb-3 mb-3">
                    {% if lecturer %}
                        <h5 class="mb-1">{{ lecturer.user.get_full_name }}</h5>
                        <span class="badge bg-primary">Lecturer</span>
                        {% if lecturer.is_admin_assistant %}
                            <span class="badge bg-info">Admin Assistant</span>
                        {% endif %}
                    {% else %}
                        <h5 class="mb-1">{{ user.get_full_name }}</h5>
                        {% if user.is_superuser %}
                            <span class="badge bg-danger">Administrator</span>
                        {% endif %}
                    {% endif %}
                </div>
                {% if lecturer %}
                <p class="mb-1"><strong>Staff ID:</strong> {{ lecturer.staff_id }}</p>
                <p class="mb-1"><strong>Department:</strong> {{ lecturer.department }}</p>
                {% endif %}
            </div>
        </div>

        <!-- Navigation Links -->
        <ul class="nav flex-column">
            <li class="nav-item">
                <a href="{% url 'eturesultapp:dashboard' %}" class="nav-link {% if request.path == '/' or request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                    <i class="fas fa-home"></i> Dashboard
                </a>
            </li>
            {% if user.is_superuser %}
            <li class="nav-item">
                <a href="{% url 'eturesultapp:student_list' %}" class="nav-link {% if request.resolver_match.url_name == 'student_list' %}active{% endif %}">
                    <i class="fas fa-user-graduate"></i> Students
                </a>
            </li>
            <li class="nav-item">
                <a href="{% url 'eturesultapp:lecturer_list' %}" class="nav-link {% if request.resolver_match.url_name == 'lecturer_list' %}active{% endif %}">
                    <i class="fas fa-chalkboard-teacher"></i> Lecturers
                </a>
            </li>
            {% endif %}
            <li class="nav-item">
                <a href="{% url 'eturesultapp:course_list' %}" class="nav-link {% if request.resolver_match.url_name == 'course_list' %}active{% endif %}">
                    <i class="fas fa-book"></i> {% if user.is_superuser %}Courses{% else %}My Courses{% endif %}
                </a>
            </li>
            <li class="nav-item">
                <a href="{% url 'eturesultapp:result_list' %}" class="nav-link {% if request.resolver_match.url_name == 'result_list' %}active{% endif %}">
                    <i class="fas fa-graduation-cap"></i> Results
                </a>
            </li>
        </ul>

        {% if user.is_superuser or lecturer.is_admin_assistant %}
        <h6 class="sidebar-heading mt-4 d-flex justify-content-between align-items-center px-3">
            <span>Administration</span>
        </h6>
        <ul class="nav flex-column mb-2">
            <li class="nav-item">
                <a class="nav-link" href="/admin/" target="_blank">
                    <i class="fas fa-cog"></i> Django Admin
                </a>
            </li>
        </ul>
        {% endif %}
    </div>
</div>
{% endif %}
